Options -Indexes
RewriteEngine On

# =====================================================
# CORS - COMPLETE FIX
# =====================================================

# 1. Handle OPTIONS preflight (200 response)
RewriteCond %{REQUEST_METHOD} =OPTIONS
RewriteRule ^(.*)$ - [R=200,L]

# 2. CORS HEADERS for ALL responses (GET/POST/etc)
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "http://localhost:3000"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Accept, Authorization, X-Requested-With"
    Header always set Access-Control-Max-Age "86400"
    Header always set Vary "Origin"
</IfModule>

# 3. Your API routing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA]
